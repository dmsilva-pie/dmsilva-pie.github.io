{"version":3,"sources":["components/Viewer3D.js","components/SurfaceListItem.js","components/SurfaceList.js","components/HelpMenu.js","components/OptionMenu.js","components/ToolbarMenu.js","components/App.js","serviceWorker.js","index.js"],"names":["Viewer3D","window","LITHO3D","createScene","react_default","a","createElement","id","Fade","in","this","props","loading","style","transitionDelay","unmountOnExit","CircularProgress","disableShrink","size","Component","CustomSlider","withStyles","root","minWidth","width","height","color","thumb","backgroundColor","border","marginTop","marginLeft","&:focus,&:hover,&$active","boxShadow","mark","active","valueLabel","left","top","track","borderRadius","rail","Slider","SurfaceListItem","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","DEFAULT_RES","isMobile","low_res","med_res","DEFAULT_SCALE","max_ext","Math","max","min_ext","state","anchorEl_tex","undefined","anchorEl_obj","dialogOpen","img_url","def_img_url","placeholderImage","index","img_file","enabled","def_res","usable","hasOwnProperty","def_state","scale","def_ext","resolution","reference","def_ref","transX","def_transX","transY","def_transY","scaleX","def_scaleX","scaleY","def_scaleY","rotation","def_rotation","handleOpenMenu","bind","assertThisInitialized","handleOpenTexMenu","handleCloseMenu","handleOpenDialog","handleCloseDialog","handleCheck","onImageAdd","onImageAddError","onImageRemove","handleScaleChange","debounce","handleScaleSliderChange","handleResolutionChange","handleRefTypeChange","handleTextureTransXChange","handleTextureTransYChange","handleTextureScaleXChange","handleTextureScaleYChange","handleTextureRotationChange","handleTexturePositionReset","formatSliderScaling","formatSliderRotation","event","setState","currentTarget","file","_this2","length","warningFunc","imgURL","URL","createObjectURL","addReference","then","revokeObjectURL","refs","files","catch","err","error","message","_this3","removeReference","_this4","target","checked","changeReferenceState","newValue","_this5","applyReference","_this6","updateSurface","_this7","changeReferenceType","e","_this8","oldValue","changeReferencePosition","_this9","_this10","_this11","_this12","_this13","x","toFixed","_this14","Fragment","ListItem","key","concat","item","Box","display","dist_default","className","ref","onChange","onError","accepts","multiple","maxFiles","maxFileSize","minFileSize","clickable","alignSelf","ButtonBase","focusRipple","backgroundImage","backgroundSize","backgroundRepeat","backgroundPosition","Tooltip","title","enterDelay","AddCircle_default","opacity","flexDirection","flexGrow","pl","alignItems","Typography","Divider","IconButton","aria-label","onClick","Delete_default","disabled","aria-controls","aria-haspopup","OpenWith_default","Menu_Menu","anchorEl","keepMounted","open","Boolean","onClose","px","py","value","aria-labelledby","valueLabelDisplay","step","marks","min","valueLabelFormat","PI","Button","variant","ExpandMore_default","pt","ToggleButtonGroup","exclusive","ToggleButton","high_res","ultra_res","defaultValue","Checkbox","Dialog","aria-describedby","DialogTitle","DialogContent","DialogContentText","DialogActions","autoFocus","useStyles","makeStyles","theme","overflow","subroot","paddingRight","root2","position","maxHeight","SurfaceList","classes","_useState","useState","_useState2","slicedToArray","properties","setProperties","hasProperty","surface","property","name","defaultProperty","med","useEffect","model_def_uri","fetch","response","json","data","List","surfaces","map","isUpload","exclude","SurfaceListItem_SurfaceListItem","low_div_rate","med_div_rate","high_div_rate","ultra_div_rate","min_extrusion_rate","max_extrusion_rate","extrusion","styles","helper","textAlign","whiteSpace","overflowY","overflowX","helpSectionArray","text","HelpMenu","_React$useState","React","_React$useState2","setOpen","_React$useState3","_React$useState4","setTitle","_React$useState5","_React$useState6","setText","handleClose","scroll","dividers","paragraph","help","type","heading","fontSize","fontWeight","colorpicker","uploader","margin","mobileTransparent","toolbar","justifyContent","padding","OptionMenu","handleMenuChange","panel","isExpanded","expandedMenu","openFunction","handleColorChange","hex","loadingToggle","colorize","emitWarningMessage","model_uri","model_type","surfaceList","viewDisplay","snackbarOpen","snackbarDuration","snackbarMsg","isUploadDialogOpen","uploadedModel","handleViewCheck","handleUploaderClose","handleUploaderOpen","handleUploaderSave","handleUploaderError","handleSnackbarClose","downloadModelOBJ","downloadModelSTL","downloadModelGLB","downloadJSON","downloadZip","getConfiguration","format","exec","MODELTYPES","UPLOAD","loadModel","Promise","resolve","container","document","getElementById","hasAttribute","getAttribute","downloadSTL","downloadOBJ","downloadGLTF","res","extension","upload","loadZip","result","viewMode","model_url","model_def_url","duration","arguments","reason","mode","changeViewMode","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","ContentProps","action","Close_default","openToggle","ChevronRight_default","Menu_default","ExpansionPanel","elevation","expanded","TransitionProps","ExpansionPanelSummary","expandIcon","ListItemIcon","Publish_default","ml","ExpansionPanelDetails","ColorLens_default","lib","onChangeComplete","Build_default","Settings_default","FormControl","component","FormLabel","RemoveRedEye_default","RadioGroup","FormControlLabel","control","Radio","label","Help_default","CloudDownload_default","flexWrap","appBar","zIndex","drawer","transition","transitions","create","easing","sharp","leavingScreen","appBarShift","enteringScreen","menuButton","marginRight","hide","flexShrink","drawerOpen","drawerClose","defineProperty","spacing","breakpoints","up","objectSpread","mixins","content","ToolbarMenu","_clsx","_clsx2","useTheme","handleDrawerOpen","handleDrawerClose","handleDrawerToggle","es","onSwiping","dir","delta","SwipeableDrawer","clsx","paper","onOpen","PaperProps","BackdropProps","ModalProps","anchor","OptionMenu_OptionMenu","loadingFunction","App","toggleLoading","Viewer3D_Viewer3D","location","hostname","match","ReactDOM","render","App_App","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.86342cb6.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\n\r\nimport Fade from '@material-ui/core/Fade';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\n\r\nexport default class Viewer3D extends Component {\r\n\r\n\tcomponentDidMount() {\r\n\t\twindow.LITHO3D.createScene();\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div id=\"viewer\">\r\n\t\t\t\t<div id=\"loadingScreen\">\r\n\t\t\t\t\t<Fade\r\n\t\t\t\t\t\tin={this.props.loading}\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\ttransitionDelay: this.props.loading ? '200ms' : '0ms',\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tunmountOnExit\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<CircularProgress disableShrink={false} size={100} />\r\n\t\t\t\t\t</Fade>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n","import React, { Component } from 'react';\r\nimport Files from 'react-files';\r\nimport { debounce } from 'lodash';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport Box from '@material-ui/core/Box';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport ButtonBase from '@material-ui/core/ButtonBase';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Checkbox from '@material-ui/core/CheckBox';\r\nimport Slider from '@material-ui/core/Slider';\r\nimport ToggleButton from '@material-ui/lab/ToggleButton';\r\nimport ToggleButtonGroup from '@material-ui/lab/ToggleButtonGroup'\r\n\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\n\r\nimport MoveIcon from '@material-ui/icons/OpenWith';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\r\n\r\n\r\nconst CustomSlider = withStyles({\r\n\troot: {\r\n\t\tminWidth: 110,\r\n\t\twidth: 'calc(100% - 20px)',\r\n\t\theight: 15,\r\n\t\tcolor: 'rgba(0, 0, 0, 1)',\r\n\t},\r\n\tthumb: {\r\n\t\theight: 20,\r\n\t\twidth: 20,\r\n\t\tbackgroundColor: '#fff',\r\n\t\tborder: '2px solid currentColor',\r\n\t\tmarginTop: -4,\r\n\t\tmarginLeft: -12,\r\n\t\t'&:focus,&:hover,&$active': {\r\n\t\t\tboxShadow: 'inherit',\r\n\t\t},\r\n\t},\r\n\tmark: {\r\n\t\tbackgroundColor: 'rgba(0, 0, 0, 0)',\r\n\t\theight: 8,\r\n\t\twidth: 1,\r\n\t\tmarginTop: -3,\r\n\t},\r\n\tactive: {},\r\n\tvalueLabel: {\r\n\t\tleft: 'calc(-50% + 0px)',\r\n\t\ttop: -22,\r\n\t\tcolor: 'rgba(0, 0, 0, 0.5)',\r\n\t},\r\n\ttrack: {\r\n\t\theight: 8,\r\n\t\tborderRadius: 2,\r\n\t\tcolor: 'rgba(0, 0, 0, 0)',\r\n\t},\r\n\trail: {\r\n\t\theight: 10,\r\n\t\tborderRadius: 2,\r\n\t\tcolor: 'rgba(0, 0, 0, 1)',\r\n\t},\r\n})(Slider);\r\n\r\n\r\nexport default class SurfaceListItem extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\t//Initial default values\r\n\t\tthis.DEFAULT_RES = this.props.isMobile ? this.props.low_res : this.props.med_res;\r\n\t\tthis.DEFAULT_SCALE = this.props.max_ext * 0.2 !== 0 ?\r\n\t\t\tMath.max(this.props.min_ext * 0.2, this.props.max_ext * 0.2) : this.props.min_ext * 0.2;\r\n\r\n\t\tthis.state = {\r\n\t\t\tanchorEl_tex: undefined,\r\n\t\t\tanchorEl_obj: undefined,\r\n\t\t\tdialogOpen: false,\r\n\t\t\tloading: false,\r\n\t\t\timg_url: this.props.def_img_url ? this.props.def_img_url : window.LITHO3D.placeholderImage(this.props.index),\r\n\t\t\timg_file: null,\r\n\t\t\tenabled: this.props.def_res ? true : false,\r\n\t\t\tusable: this.props.hasOwnProperty(\"def_state\") ? this.props.def_state : true,\r\n\t\t\tscale: this.props.def_ext !== null ? this.props.def_ext : this.DEFAULT_SCALE,\r\n\t\t\tresolution: this.props.def_res !== null ? this.props.def_res : this.DEFAULT_RES,\r\n\t\t\treference: this.props.def_ref ? this.props.def_ref : \"positive\",\r\n\t\t\ttransX: this.props.def_transX,\r\n\t\t\ttransY: this.props.def_transY,\r\n\t\t\tscaleX: this.props.def_scaleX,\r\n\t\t\tscaleY: this.props.def_scaleY,\r\n\t\t\trotation: this.props.def_rotation\r\n\t\t};\r\n\r\n\t\tthis.handleOpenMenu = this.handleOpenMenu.bind(this);\r\n\t\tthis.handleOpenTexMenu = this.handleOpenTexMenu.bind(this);\r\n\t\tthis.handleCloseMenu = this.handleCloseMenu.bind(this);\r\n\t\tthis.handleOpenDialog = this.handleOpenDialog.bind(this);\r\n\t\tthis.handleCloseDialog = this.handleCloseDialog.bind(this);\r\n\t\tthis.handleCheck = this.handleCheck.bind(this);\r\n\t\tthis.onImageAdd = this.onImageAdd.bind(this);\r\n\t\tthis.onImageAddError = this.onImageAddError.bind(this);\r\n\t\tthis.onImageRemove = this.onImageRemove.bind(this);\r\n\t\tthis.handleScaleChange = debounce(this.handleScaleSliderChange.bind(this), this.props.isMobile ? 200 : 50);\r\n\t\tthis.handleResolutionChange = this.handleResolutionChange.bind(this);\r\n\t\tthis.handleRefTypeChange = this.handleRefTypeChange.bind(this);\r\n\t\tthis.handleTextureTransXChange = debounce(this.handleTextureTransXChange.bind(this), this.props.isMobile ? 200 : 10);\r\n\t\tthis.handleTextureTransYChange = debounce(this.handleTextureTransYChange.bind(this), this.props.isMobile ? 200 : 10);\r\n\t\tthis.handleTextureScaleXChange = debounce(this.handleTextureScaleXChange.bind(this), this.props.isMobile ? 200 : 10);\r\n\t\tthis.handleTextureScaleYChange = debounce(this.handleTextureScaleYChange.bind(this), this.props.isMobile ? 200 : 10);\r\n\t\tthis.handleTextureRotationChange = debounce(this.handleTextureRotationChange.bind(this), this.props.isMobile ? 200 : 10);\r\n\t\tthis.handleTexturePositionReset = this.handleTexturePositionReset.bind(this);\r\n\t\tthis.formatSliderScaling = this.formatSliderScaling.bind(this);\r\n\t\tthis.formatSliderRotation = this.formatSliderRotation.bind(this);\r\n\t}\r\n\r\n\thandleOpenMenu(event) {\r\n\t\tthis.setState({ anchorEl_obj: event.currentTarget });\r\n\t}\r\n\r\n\thandleOpenTexMenu(event) {\r\n\t\tthis.setState({ anchorEl_tex: event.currentTarget });\r\n\t}\r\n\thandleCloseMenu() {\r\n\t\tthis.setState({ anchorEl_tex: null, anchorEl_obj: null });\r\n\t}\r\n\r\n\thandleOpenDialog() {\r\n\t\tthis.setState({ dialogOpen: true });\r\n\t}\r\n\thandleCloseDialog() {\r\n\t\tthis.setState({ dialogOpen: false });\r\n\t}\r\n\r\n\tonImageAdd(file) {\r\n\t\tif (file.length > 0) {\r\n\t\t\tif(this.props.isMobile)\r\n\t\t\t\tthis.props.warningFunc(\"Adding image to surface...\", 30000);\r\n\t\t\tthis.props.loading(true);\r\n\r\n\t\t\tvar imgURL = URL.createObjectURL(file[0]);\r\n\r\n\t\t\twindow.LITHO3D.addReference(this.props.index, imgURL, this.state.resolution, this.state.scale)\r\n\t\t\t.then(() => {\r\n\t\t\t\tif (this.state.img_url !== \"\" && this.state.img_url !== window.LITHO3D.placeholderImage(this.props.index)) \r\n\t\t\t\t\tURL.revokeObjectURL(this.state.img_url);\r\n\t\t\t\t\r\n\t\t\t\tthis.setState({ img_url: imgURL, img_file: file[0], enabled: true }, () => {\r\n\t\t\t\t\tthis.refs.files.setState({ files: [] });\r\n\t\t\t\t\tthis.props.loading(false);\r\n\t\t\t\t\tif(this.props.isMobile)\r\n\t\t\t\t\t\tthis.props.warningFunc(\"New image reference was set.\", 500);\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tthis.props.warningFunc(err);\r\n\t\t\t\tURL.revokeObjectURL(imgURL);\r\n\t\t\t\tthis.refs.files.setState({ files: [] });\r\n\t\t\t\tthis.props.loading(false);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tonImageAddError(error) {\r\n\t\tthis.props.warningFunc(error.message);\r\n\t}\r\n\r\n\tonImageRemove() {\r\n\t\twindow.LITHO3D.removeReference(this.props.index)\r\n\t\t.then(() => {\r\n\t\t\tif (this.state.img_url !== \"\" && this.state.img_url !== window.LITHO3D.placeholderImage(this.props.index)) \r\n\t\t\t\tURL.revokeObjectURL(this.state.img_url);\r\n\t\t\tthis.setState({\r\n\t\t\t\timg_url: window.LITHO3D.placeholderImage(this.props.index), img_file: null, enabled: false, usable: true,\r\n\t\t\t\tscale: this.props.def_ext !== null ? this.props.def_ext : this.DEFAULT_SCALE, \r\n\t\t\t\tresolution: this.props.def_res !== null ? this.props.def_res : this.DEFAULT_RES\r\n\t\t\t}, () => {\r\n\t\t\t\tthis.refs.files.setState({ files: [] });\r\n\t\t\t\tthis.props.loading(false);\r\n\t\t\t});\r\n\t\t})\r\n\t\t.catch(err => {\r\n\t\t\tthis.props.warningFunc(err);\r\n\t\t\tthis.refs.files.setState({ files: [] });\r\n\t\t\tthis.props.loading(false);\r\n\t\t});\r\n\t}\r\n\r\n\thandleCheck(event) {\r\n\t\tif (this.state.usable !== event.target.checked) {\r\n\t\t\tvar checked = this.state.usable;\r\n\t\t\tthis.props.loading(true);\r\n\t\t\tif(window.LITHO3D.changeReferenceState(this.props.index, !checked, this.state.scale)){\r\n\t\t\t\tthis.setState({ usable: !checked }, () => {\r\n\t\t\t\t\tthis.props.loading(false);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse this.props.loading(false);\r\n\t\t}\r\n\t};\r\n\r\n\thandleScaleSliderChange(event, newValue) {\r\n\t\tif (this.state.scale !== newValue) {\r\n\t\t\tthis.props.loading(true);\r\n\t\t\tif(window.LITHO3D.applyReference(this.props.index, newValue)){\r\n\t\t\t\tthis.setState({ scale: newValue }, () => {\r\n\t\t\t\t\tthis.props.loading(false);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse this.props.loading(false);\r\n\t\t}\r\n\t}\r\n\r\n\thandleResolutionChange(event, newValue) {\r\n\t\tif (this.state.resolution !== newValue) {\r\n\t\t\tif(this.props.isMobile)\r\n\t\t\t\tthis.props.warningFunc(\"Changing model resolution...\", 10000);\r\n\t\t\tthis.props.loading(true);\r\n\t\t\twindow.LITHO3D.updateSurface(this.props.index, newValue, this.state.scale)\r\n\t\t\t.then(() => {\r\n\t\t\t\tthis.setState({ resolution: newValue }, () => {\r\n\t\t\t\t\tthis.props.loading(false);\r\n\t\t\t\t\tif(this.props.isMobile)\r\n\t\t\t\t\t\tthis.props.warningFunc(\"New resolution was set.\", 500);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\thandleRefTypeChange(event, newValue) {\r\n\t\tif (this.state.reference !== newValue) {\r\n\t\t\tthis.props.loading(true);\r\n\t\t\tif(window.LITHO3D.changeReferenceType(this.props.index, newValue, this.state.scale)){\r\n\t\t\t\tthis.setState({ reference: newValue }, () => {\r\n\t\t\t\t\tthis.props.loading(false);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse this.props.loading(false);\r\n\t\t}\r\n\t}\r\n\r\n\thandleTextureTransXChange(e, newValue){\r\n\t\tif (this.state.transX !== newValue) {\r\n\t\t\tvar oldValue = this.state.transX;\r\n\t\t\tthis.setState({ transX: newValue }, () => {\r\n\t\t\t\tif(window.LITHO3D.changeReferencePosition(this.props.index, this.state.transX, this.state.transY, 1 / this.state.scaleX, 1 / this.state.scaleY, this.state.rotation, this.state.scale))\r\n\t\t\t\t\t\tthis.props.loading(false);\r\n\t\t\t\telse \r\n\t\t\t\t\tthis.setState({ transX: oldValue }, () => {\r\n\t\t\t\t\t\tthis.props.loading(false)});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\thandleTextureTransYChange(e, newValue){\r\n\t\tif (this.state.transY !== newValue) {\r\n\t\t\tvar oldValue = this.state.transY;\r\n\t\t\tthis.setState({ transY: newValue }, () => {\r\n\t\t\t\tif(window.LITHO3D.changeReferencePosition(this.props.index, this.state.transX, this.state.transY, 1 / this.state.scaleX, 1 / this.state.scaleY, this.state.rotation, this.state.scale))\r\n\t\t\t\t\t\tthis.props.loading(false);\r\n\t\t\t\telse \r\n\t\t\t\t\tthis.setState({ transY: oldValue }, () => {\r\n\t\t\t\t\t\tthis.props.loading(false)});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\thandleTextureScaleXChange(e, newValue){\r\n\t\tif (this.state.scaleX !== newValue) {\r\n\t\t\tvar oldValue = this.state.scaleX;\r\n\t\t\tthis.setState({ scaleX: newValue }, () => {\r\n\t\t\t\tif(window.LITHO3D.changeReferencePosition(this.props.index, this.state.transX, this.state.transY, 1 / this.state.scaleX, 1 / this.state.scaleY, this.state.rotation, this.state.scale))\r\n\t\t\t\t\t\tthis.props.loading(false);\r\n\t\t\t\telse \r\n\t\t\t\t\tthis.setState({ scaleX: oldValue }, () => {\r\n\t\t\t\t\t\tthis.props.loading(false)});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\thandleTextureScaleYChange(e, newValue){\r\n\t\tif (this.state.scaleY !== newValue) {\r\n\t\t\tvar oldValue = this.state.scaleY;\r\n\t\t\tthis.setState({ scaleY: newValue }, () => {\r\n\t\t\t\tif(window.LITHO3D.changeReferencePosition(this.props.index, this.state.transX, this.state.transY, 1 / this.state.scaleX, 1 / this.state.scaleY, this.state.rotation, this.state.scale))\r\n\t\t\t\t\t\tthis.props.loading(false);\r\n\t\t\t\telse \r\n\t\t\t\t\tthis.setState({ scaleY: oldValue }, () => {\r\n\t\t\t\t\t\tthis.props.loading(false)});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\thandleTextureRotationChange(e, newValue){\r\n\t\tif (this.state.rotation !== newValue) {\r\n\t\t\tvar oldValue = this.state.rotation;\r\n\t\t\tthis.setState({ rotation: newValue }, () => {\r\n\t\t\t\tif(window.LITHO3D.changeReferencePosition(this.props.index, this.state.transX, this.state.transY, 1 / this.state.scaleX, 1 / this.state.scaleY, this.state.rotation, this.state.scale))\r\n\t\t\t\t\t\tthis.props.loading(false);\r\n\t\t\t\telse \r\n\t\t\t\t\tthis.setState({ rotation: oldValue }, () => {\r\n\t\t\t\t\t\tthis.props.loading(false)});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\thandleTexturePositionReset(event) {\r\n\t\tif(window.LITHO3D.changeReferencePosition(this.props.index, 0,0,1,1,0,this.state.scale)\r\n\t\t){\r\n\t\t\tthis.setState({ transX: 0, transY: 0, scaleX: 1, scaleY: 1, rotation: 0 }, \r\n\t\t\t\t() => { this.props.loading(false);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tformatSliderScaling(x) {\r\n\t\treturn x.toFixed(2);\r\n\t}\r\n\r\n\tformatSliderRotation(x) {\r\n\t\treturn x.toFixed(2);\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<ListItem key={`item-${this.props.item}`}>\r\n\r\n\t\t\t\t\t<Box width=\"100%\" height={80} display=\"flex\">\r\n\r\n\t\t\t\t\t\t<Files\r\n\t\t\t\t\t\t\tclassName='files-dropzone'\r\n\t\t\t\t\t\t\tref='files'\r\n\t\t\t\t\t\t\tonChange={this.onImageAdd}\r\n\t\t\t\t\t\t\tonError={this.onImageAddError}\r\n\t\t\t\t\t\t\taccepts={['image/*']}\r\n\t\t\t\t\t\t\tmultiple={false}\r\n\t\t\t\t\t\t\tmaxFiles={1}\r\n\t\t\t\t\t\t\tmaxFileSize={10000000}\r\n\t\t\t\t\t\t\tminFileSize={0}\r\n\t\t\t\t\t\t\tclickable\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Box width={80} height={80} alignSelf=\"flex-start\">\r\n\r\n\t\t\t\t\t\t\t\t<ButtonBase\r\n\t\t\t\t\t\t\t\t\tfocusRipple\r\n\t\t\t\t\t\t\t\t\tkey={this.props.item + 1}\r\n\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\twidth: \"100%\",\r\n\t\t\t\t\t\t\t\t\t\theight: \"100%\",\r\n\t\t\t\t\t\t\t\t\t\tbackgroundImage: `url(${this.state.img_url})`,\r\n\t\t\t\t\t\t\t\t\t\tbackgroundSize: 'contain',\r\n\t\t\t\t\t\t\t\t\t\tbackgroundRepeat: 'no-repeat',\r\n\t\t\t\t\t\t\t\t\t\tbackgroundPosition: 'center'\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<span className=\"showonfocus\">\r\n\t\t\t\t\t\t\t\t\t\t<Tooltip title={this.state.enabled ? \"Change Image\" : \"Add Image\"} enterDelay={100}>\r\n\t\t\t\t\t\t\t\t\t\t\t<AddCircleIcon\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: \"white\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\topacity: 0.6,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\twidth: \"50%\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\theight: \"50%\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t</ButtonBase>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Files>\r\n\r\n\r\n\t\t\t\t\t\t<Box height={80} flexDirection='column' flexGrow={1} alignSelf=\"center\">\r\n\r\n\t\t\t\t\t\t\t<Box height={40} pl={3} display=\"flex\" flexGrow={1} alignItems=\"center\">\r\n\t\t\t\t\t\t\t\t<Typography>\r\n\t\t\t\t\t\t\t\t\t{this.props.title}\r\n\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t</Box>\r\n\r\n\t\t\t\t\t\t\t<Divider />\r\n\r\n\t\t\t\t\t\t\t<Box height={40} pl={1} display=\"flex\" flexGrow={1} alignItems=\"center\">\r\n\r\n\t\t\t\t\t\t\t\t{/*CLEAR*/}\r\n\t\t\t\t\t\t\t\t{this.state.enabled ?\r\n\t\t\t\t\t\t\t\t\t<Tooltip title=\"Clear\" enterDelay={100}>\r\n\t\t\t\t\t\t\t\t\t\t<IconButton aria-label=\"delete\" onClick={this.handleOpenDialog}><DeleteIcon /></IconButton>\r\n\t\t\t\t\t\t\t\t\t</Tooltip> :\r\n\t\t\t\t\t\t\t\t\t<IconButton disabled={!this.state.enabled} aria-label=\"delete\" onClick={this.handleOpenDialog}><DeleteIcon /></IconButton>\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t{/*MOVE MENU*/}\r\n\t\t\t\t\t\t\t\t{this.state.enabled ?\r\n\t\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t<Tooltip title=\"Move/Rotate\" enterDelay={100}>\r\n\t\t\t\t\t\t\t\t\t\t\t<IconButton disabled={!this.state.enabled} aria-controls={\"texture-menu\" + this.props.item} aria-haspopup=\"true\" onClick={this.handleOpenTexMenu}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<MoveIcon />\r\n\t\t\t\t\t\t\t\t\t\t\t</IconButton >\r\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t\t\t\t<Menu\r\n\t\t\t\t\t\t\t\t\t\t\tid={\"texture-menu\" + this.props.item}\r\n\t\t\t\t\t\t\t\t\t\t\tanchorEl={this.state.anchorEl_tex}\r\n\t\t\t\t\t\t\t\t\t\t\tkeepMounted\r\n\t\t\t\t\t\t\t\t\t\t\topen={Boolean(this.state.anchorEl_tex)}\r\n\t\t\t\t\t\t\t\t\t\t\tonClose={this.handleCloseMenu}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<Box px={2} py={1} display=\"flex\" flexDirection='column' flexGrow={1} alignItems=\"center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Typography>Translate X</Typography>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<CustomSlider\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleTextureTransXChange}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.transX}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-labelledby=\"discrete-slider\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalueLabelDisplay=\"auto\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstep={this.props.isMobile? 0.05 : 0.02}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmarks\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmin={-1.5}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmax={1.5}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Typography>Translate Y</Typography>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<CustomSlider\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleTextureTransYChange}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.transY}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-labelledby=\"discrete-slider\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalueLabelDisplay=\"auto\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstep={this.props.isMobile? 0.05 : 0.02}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmarks\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmin={-1.5}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmax={1.5}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Typography>Scale X</Typography>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<CustomSlider\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleTextureScaleXChange}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.scaleX}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-labelledby=\"discrete-slider\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalueLabelDisplay=\"auto\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalueLabelFormat={this.formatSliderScaling}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstep={this.props.isMobile? 0.05 : 0.02}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmarks\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmin={0.05}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmax={1.95}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Typography>Scale Y</Typography>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<CustomSlider\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleTextureScaleYChange}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.scaleY}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-labelledby=\"discrete-slider\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalueLabelDisplay=\"auto\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalueLabelFormat={this.formatSliderScaling}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstep={this.props.isMobile? 0.05 : 0.02}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmarks\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmin={0.005}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmax={2.005}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Typography>Rotate</Typography>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<CustomSlider\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleTextureRotationChange}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.rotation}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\taria-labelledby=\"discrete-slider\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalueLabelDisplay=\"auto\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalueLabelFormat={this.formatSliderRotation}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstep={Math.PI / 32}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmarks\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmin={-Math.PI}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmax={Math.PI}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Button variant=\"contained\" onClick={this.handleTexturePositionReset}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tReset\r\n\t\t\t\t\t\t\t\t  \t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t\t\t</Box>\r\n\r\n\t\t\t\t\t\t\t\t\t\t</Menu>\r\n\t\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t\t<IconButton disabled={!this.state.enabled} aria-controls={\"texture-menu\" + this.props.item} aria-haspopup=\"true\" onClick={this.handleOpenTexMenu}>\r\n\t\t\t\t\t\t\t\t\t\t<MoveIcon />\r\n\t\t\t\t\t\t\t\t\t</IconButton >\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t{/*VOLUME MENU*/}\r\n\t\t\t\t\t\t\t\t{this.state.enabled ?\r\n\t\t\t\t\t\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t\t\t\t\t\t<Tooltip title=\"Volume\" enterDelay={100}>\r\n\t\t\t\t\t\t\t\t\t\t\t<IconButton disabled={!this.state.enabled} aria-controls={\"sculpting-menu\" + this.props.item} aria-haspopup=\"true\" onClick={this.handleOpenMenu}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<ExpandMoreIcon />\r\n\t\t\t\t\t\t\t\t\t\t\t</IconButton >\r\n\t\t\t\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t\t\t\t<Menu\r\n\t\t\t\t\t\t\t\t\t\t\tid={\"sculpting-menu\" + this.props.item}\r\n\t\t\t\t\t\t\t\t\t\t\tanchorEl={this.state.anchorEl_obj}\r\n\t\t\t\t\t\t\t\t\t\t\tkeepMounted\r\n\t\t\t\t\t\t\t\t\t\t\topen={Boolean(this.state.anchorEl_obj)}\r\n\t\t\t\t\t\t\t\t\t\t\tonClose={this.handleCloseMenu}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<Box px={2} py={1} display=\"flex\" flexDirection='column' flexGrow={1} alignItems=\"center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Box pt={1} display=\"flex\" flexDirection='column' flexGrow={1} alignItems=\"center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Typography>Image Reference</Typography>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ToggleButtonGroup\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.reference}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\texclusive\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleRefTypeChange}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-label=\"reference\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ToggleButton value=\"positive\" aria-label=\"positive\" disabled={this.state.reference === \"positive\"}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tPositive\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</ToggleButton>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ToggleButton value=\"negative\" aria-label=\"negative\" disabled={this.state.reference === \"negative\"}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tNegative\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</ToggleButton>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</ToggleButtonGroup>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Box pt={2} display=\"flex\" flexDirection='column' flexGrow={1} alignItems=\"center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Typography>Resolution</Typography>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ToggleButtonGroup\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={this.state.resolution}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\texclusive\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleResolutionChange}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-label=\"resolution\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ToggleButton value={this.props.low_res} aria-label=\"low\" disabled={this.state.resolution === this.props.low_res}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlow\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</ToggleButton>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ToggleButton value={this.props.med_res} aria-label=\"mid\" disabled={this.state.resolution === this.props.med_res}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmid\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</ToggleButton>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ToggleButton value={this.props.high_res} aria-label=\"high\" disabled={this.state.resolution === this.props.high_res}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thigh\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</ToggleButton>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<ToggleButton value={this.props.ultra_res} aria-label=\"ultra\" disabled={this.state.resolution === this.props.ultra_res}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tultra\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</ToggleButton>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</ToggleButtonGroup>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Box width=\"100%\" pt={2} display=\"flex\" flexDirection='column' flexGrow={1} alignItems=\"center\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Typography>Extrude Scale</Typography>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<CustomSlider\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={this.handleScaleChange}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdefaultValue={this.state.scale}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taria-labelledby=\"discrete-slider\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalueLabelDisplay=\"auto\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tstep={1}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmarks\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmin={this.props.min_ext}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmax={this.props.max_ext}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t\t\t</Menu>\r\n\t\t\t\t\t\t\t\t\t</React.Fragment>\r\n\t\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t\t<IconButton disabled={!this.state.enabled} aria-controls={\"sculpting-menu\" + this.props.item} aria-haspopup=\"true\" onClick={this.handleOpenMenu}>\r\n\t\t\t\t\t\t\t\t\t\t<ExpandMoreIcon />\r\n\t\t\t\t\t\t\t\t\t</IconButton >\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</Box>\r\n\r\n\t\t\t\t\t\t{/*Enable/Disable Checkmark*/}\r\n\t\t\t\t\t\t<Box width={40} height={80} display=\"flex\" alignItems=\"center\" alignSelf=\"flex-end\">\r\n\t\t\t\t\t\t\t{this.state.enabled ?\r\n\t\t\t\t\t\t\t\tthis.state.usable ?\r\n\t\t\t\t\t\t\t\t\t<Tooltip title=\"Disable\" enterDelay={100}>\r\n\t\t\t\t\t\t\t\t\t\t<Checkbox disabled={!this.state.enabled} checked={this.state.usable} onChange={this.handleCheck} />\r\n\t\t\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t\t<Tooltip title=\"Enable\" enterDelay={100}>\r\n\t\t\t\t\t\t\t\t\t\t<Checkbox disabled={!this.state.enabled} checked={this.state.usable} onChange={this.handleCheck} />\r\n\t\t\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\t\t\tdisabled={!this.state.enabled}\r\n\t\t\t\t\t\t\t\t\tchecked={this.state.usable}\r\n\t\t\t\t\t\t\t\t\tonChange={this.handleCheck}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</Box>\r\n\r\n\t\t\t\t\t</Box>\r\n\r\n\t\t\t\t</ListItem>\r\n\t\t\t\t<Dialog\r\n\t\t\t\t\topen={this.state.dialogOpen}\r\n\t\t\t\t\tonClose={this.handleCloseDialog}\r\n\t\t\t\t\taria-labelledby=\"alert-dialog-title\"\r\n\t\t\t\t\taria-describedby=\"alert-dialog-description\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<DialogTitle id=\"alert-dialog-title\">{\"Clear surface?\"}</DialogTitle>\r\n\t\t\t\t\t<DialogContent>\r\n\t\t\t\t\t\t<DialogContentText id=\"alert-dialog-description\">\r\n\t\t\t\t\t\t\tDo you wish to clear the data on the selected surface?\r\n\t\t\t  \t\t\t</DialogContentText>\r\n\t\t\t\t\t</DialogContent>\r\n\t\t\t\t\t<DialogActions>\r\n\t\t\t\t\t\t<Button onClick={() => { this.handleCloseDialog(); this.onImageRemove(); }} color=\"primary\">\r\n\t\t\t\t\t\t\tConfirm\r\n\t\t\t  \t\t\t</Button>\r\n\t\t\t\t\t\t<Button onClick={this.handleCloseDialog} color=\"primary\" autoFocus>\r\n\t\t\t\t\t\t\tCancel\r\n\t\t\t  \t\t\t</Button>\r\n\t\t\t\t\t</DialogActions>\r\n\t\t\t\t</Dialog>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport List from '@material-ui/core/List';\r\nimport SurfaceListItem from './SurfaceListItem';\r\n\r\nimport Divider from '@material-ui/core/Divider';\r\n\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\troot: {\r\n\t\twidth: '100%',\r\n\t\theight: '100%',\r\n\t\toverflow: 'hidden'\r\n\t},\r\n\tsubroot: {\r\n\t\twidth: '100%',\r\n\t\theight: '100%',\r\n\t\toverflow: 'auto',\r\n\t\tpaddingRight: '20px'\r\n\t},\r\n\troot2: {\r\n\t\twidth: '100%',\r\n\t\tbackgroundColor: window.LITHO3D.isMobile ? \"rgba(230,230,230,0)\" : \"rgba(255,255,255,1)\",\r\n\t\tposition: 'relative',\r\n\t\tmaxHeight: 250,\r\n\t},\r\n}));\r\n\r\nexport default function SurfaceList(props) {\r\n\tconst classes = useStyles();\r\n\r\n\tconst warningFunc = props.warningFunc;\r\n\tconst [properties, setProperties] = useState(null);\r\n\r\n\tfunction hasProperty(surface, property) {\r\n\t\treturn properties !== null && properties[surface.name] && properties[surface.name].hasOwnProperty(property);\r\n\t};\r\n\r\n\t/* Acquire surface properties JSON. These are used to control premade model default ranges and values. */\r\n\tuseEffect(() => {\r\n\t\tif(props.model_def_uri && props.model_def_uri !== \"\"){\r\n\t\t\tfetch(props.model_def_uri)\r\n\t\t\t.then(response => response.json())\r\n\t\t\t.then(data => {\r\n\t\t\t\tsetProperties(data);\r\n\t\t\t})\r\n\t\t\t.catch((error) => {\r\n\t\t\t\twarningFunc(error.message);\r\n\t\t\t});\r\n\t\t}\r\n\t}, [props.model_def_uri, warningFunc]);\r\n\r\n\r\n\tfunction defaultProperty(surface, property){\r\n\t\tvar isMobile = window.LITHO3D.isMobile;\r\n\r\n\t\tswitch(property){\r\n\t\t\tcase \"low\":\r\n\t\t\t\treturn isMobile ? surface.med - 2 : surface.med - 1;\r\n\t\t\tcase \"med\":\r\n\t\t\t\treturn isMobile ? surface.med - 1 : surface.med;\r\n\t\t\tcase \"high\":\r\n\t\t\t\treturn isMobile ? surface.med : surface.med + 1;\r\n\t\t\tcase \"ultra\":\r\n\t\t\t\treturn isMobile ? surface.med + 1 : surface.med + 2;\r\n\t\t\tcase \"min\":\r\n\t\t\t\treturn -10;\r\n\t\t\tcase \"max\":\r\n\t\t\t\treturn 10;\r\n\t\t\tdefault:\r\n\t\t\t\treturn 0;\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<div className={classes.subroot+' hide-scrollbar'}>\r\n\t\t\t\t<List className={classes.root2}>\r\n\t\t\t\t\t<Divider />\r\n\t\t\t\t\t{props.surfaces.length > 0 ?\r\n\t\t\t\t\t\tprops.surfaces.map((surface, index) => (\r\n\t\t\t\t\t\t\tprops.isUpload || (hasProperty(surface, \"exclude\") && !properties[surface.name].exclude) ?\r\n\t\t\t\t\t\t\t<div key={`li-${index}-${surface.name}`}>\r\n\t\t\t\t\t\t\t\t<SurfaceListItem\r\n\t\t\t\t\t\t\t\t\tindex={index}\r\n\t\t\t\t\t\t\t\t\titem={surface.name}\r\n\t\t\t\t\t\t\t\t\tisMobile={window.LITHO3D.isMobile}\r\n\t\t\t\t\t\t\t\t\ttitle={hasProperty(surface, \"title\") ? properties[surface.name].title : surface.name}\r\n\t\t\t\t\t\t\t\t\tlow_res={hasProperty(surface, \"low_div_rate\") ? properties[surface.name].low_div_rate : defaultProperty(surface, \"low\")}\r\n\t\t\t\t\t\t\t\t\tmed_res={hasProperty(surface, \"med_div_rate\") ? properties[surface.name].med_div_rate : defaultProperty(surface, \"med\")}\r\n\t\t\t\t\t\t\t\t\thigh_res={hasProperty(surface, \"high_div_rate\") ? properties[surface.name].high_div_rate : defaultProperty(surface, \"high\")}\r\n\t\t\t\t\t\t\t\t\tultra_res={hasProperty(surface, \"ultra_div_rate\") ? properties[surface.name].ultra_div_rate : defaultProperty(surface, \"ultra\")}\r\n\t\t\t\t\t\t\t\t\tmin_ext={hasProperty(surface, \"min_extrusion_rate\") ? properties[surface.name].min_extrusion_rate : defaultProperty(surface, \"min\")}\r\n\t\t\t\t\t\t\t\t\tmax_ext={hasProperty(surface, \"max_extrusion_rate\") ? properties[surface.name].max_extrusion_rate : defaultProperty(surface, \"max\")}\r\n\t\t\t\t\t\t\t\t\tdef_ext={surface.extrusion ? surface.extrusion : null}\r\n\t\t\t\t\t\t\t\t\tdef_res={surface.resolution ? surface.resolution : null}\r\n\t\t\t\t\t\t\t\t\tdef_transX={surface.transX ? surface.transX : 0}\r\n\t\t\t\t\t\t\t\t\tdef_transY={surface.transY ? surface.transY : 0}\r\n\t\t\t\t\t\t\t\t\tdef_scaleX={surface.scaleX ? surface.scaleX : 1}\r\n\t\t\t\t\t\t\t\t\tdef_scaleY={surface.scaleY ? surface.scaleY : 1}\r\n\t\t\t\t\t\t\t\t\tdef_rotation={surface.rotation ? surface.rotation : 0}\r\n\t\t\t\t\t\t\t\t\tdef_ref={surface.reference ? surface.reference : \"positive\"}\r\n\t\t\t\t\t\t\t\t\tdef_state={surface.hasOwnProperty(\"state\") ? surface.state : true}\r\n\t\t\t\t\t\t\t\t\tdef_img_url={surface.img_url ? surface.img_url : null}\r\n\t\t\t\t\t\t\t\t\tloading={props.loading}\r\n\t\t\t\t\t\t\t\t\twarningFunc={props.warningFunc}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t<Divider />\r\n\t\t\t\t\t\t\t</div> : null\r\n\t\t\t\t\t\t)) :\r\n\t\t\t\t\t\t<div>No customizable surfaces were found.</div>}\r\n\t\t\t\t</List>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}","import React from 'react';\r\n\r\nimport Box from '@material-ui/core/Box';\r\n\r\nimport Button from '@material-ui/core/Button';\r\n\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\n\r\n\r\nconst styles = {\r\n\thelper: {\r\n\t\ttextAlign: \"left\",\r\n\t\tdisplay: \"inline-block\",\r\n\t\twhiteSpace: \"pre-wrap\",\r\n\t\twidth: \"100%\",\r\n\t\tmaxHeight: \"250px\",\r\n\t\toverflowY: 'auto',\r\n\t\toverflowX: \"hidden\"\r\n\t}\r\n};\r\n\r\nconst helpSectionArray = [\r\n{\r\n    title: \"What is this app?\",\r\n    text: [\r\n        \"This is an application that is capable of personalizing 3D models to your hearts content!\",\r\n        \"Use the toolbar to the right to change settings and upload images, these will be used to manipulate the model's appearance.\"\r\n    ]\r\n},\r\n{\r\n    title: \"How do I select a model?\",\r\n    text: [\r\n        'Outside of default models, you can change the current model on scene via the \"Change Models\" tab.',\r\n        'Pressing the option will bring a prompt to upload a new 3D model. Supported formats are; \"OBJ\" and \"GLB\". Maximum file size is 100MB',\r\n        'You can also upload ZIP files containing the necessary data to recreate the model and changes, these are supplied by the application in the \"Download Models\" menu, where you can also acquire your final model.',\r\n        \"[NOTE: This will likely not be accessible to the user buying a product, the PREMADE configuration will give them a single default model that is assigned to each product.]\"\r\n\r\n    ]\r\n},\r\n{\r\n    title: \"How do I change the color of the model?\",\r\n    text: [\r\n        'You can change colors by selecting the \"Color\" tab in the toolbar.',\r\n        \"Selecting a colored square will change the color of the model to that respective color. You can also input an hexadecimal color value in the box to have access to a larger range of colors!\"\r\n\r\n    ]\r\n},\r\n{\r\n    title: \"How can I modify the model's appearance?\",\r\n    text: [\r\n        'You can manipulate the appearance of each individual customizable surface in the \"Edit Surfaces\" tab of the toolbar.',\r\n        \"In this tab you can see all the surfaces (if any) that can be edited. Click or drag images to the squares with the add prompt in order to have that image imprinted on the surface!\",\r\n        'You can then change parameters of this imprinting via the menus assigned to each surface. \"Move/Rotate\" will allow you to change the positioning of the imprinting, while \"Volume\" will allow you to change the extrusion properties of the surface.',\r\n        'Selecting \"Clear\" will allow you remove that image/imprinting, while the checkmark allows you to hide or show the changes. Hidden changes will not affect the final model mesh.'\r\n\r\n    ]\r\n},\r\n{\r\n    title: \"What are these additional options?\",\r\n    text: [\r\n        'In the \"Settings\" tab, you have options that affect the application\\'s user experience, such as changing the viewing mode of the model. These do not affect the final product.'\r\n    ]\r\n}\r\n];\r\n\r\nexport default function HelpMenu() {\r\n    const [open, setOpen] = React.useState(false);\r\n    const [title, setTitle] = React.useState(\"Title\");\r\n    const [text, setText] = React.useState([]);\r\n\r\n    const handleClickOpen = (title, text)  => () => {\r\n        setOpen(true);\r\n        setTitle(title);\r\n        setText(text);\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setOpen(false);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <Dialog\r\n                open={open}\r\n                onClose={handleClose}\r\n                scroll=\"paper\"\r\n                aria-labelledby=\"scroll-dialog-title\"\r\n            >\r\n                <DialogTitle id=\"scroll-dialog-title\">{title}</DialogTitle>\r\n                <DialogContent dividers={true}>\r\n                        {text.map((paragraph, index) => (\r\n                            <DialogContentText key={index}>\r\n                                {paragraph}\r\n                            </DialogContentText>\r\n                        ))}\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={handleClose} color=\"primary\">\r\n                        Close\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n\r\n            <Box style={styles.helper}>\r\n                {helpSectionArray.map((help, index) => (\r\n                    <p key={index}><button type=\"button\" className=\"buttonlink\" onClick={handleClickOpen(help.title, help.text)}>{help.title}</button></p>\r\n                ))}\r\n            </Box>\r\n        </>\r\n    );\r\n}","import React, { Component } from 'react';\r\nimport '../css/App.css';\r\n\r\nimport Box from '@material-ui/core/Box';\r\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\r\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\r\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Button from '@material-ui/core/Button';\r\nimport Radio from '@material-ui/core/Radio';\r\nimport RadioGroup from '@material-ui/core/RadioGroup';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormLabel from '@material-ui/core/FormLabel';\r\n\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\n\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport HelpIcon from '@material-ui/icons/Help';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport ColorLensIcon from '@material-ui/icons/ColorLens';\r\nimport SettingsIcon from '@material-ui/icons/Settings';\r\nimport BuildIcon from '@material-ui/icons/Build';\r\nimport ViewIcon from '@material-ui/icons/RemoveRedEye';\r\nimport PublishIcon from '@material-ui/icons/Publish';\r\nimport CloudDownloadIcon from '@material-ui/icons/CloudDownload';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\n\r\nimport { TwitterPicker } from 'react-color';\r\nimport Files from 'react-files';\r\n\r\nimport SurfaceList from './SurfaceList';\r\nimport HelpMenu from './HelpMenu';\r\n\r\n\r\nconst styles = {\r\n\troot: {\r\n\t\twidth: '100%',\r\n\t\theight: '100%',\r\n\t\toverflow: 'hidden',\r\n\t},\r\n\tsubroot: {\r\n\t\twidth: '100%',\r\n\t\theight: '100%',\r\n\t\toverflowY: 'auto',\r\n\t\toverflowX: 'hidden',\r\n\t\tpaddingRight: '20px'\r\n\t},\r\n\theading: {\r\n\t\tfontSize: 15,\r\n\t\tfontWeight: 300,\r\n\t},\r\n\tcolorpicker: {\r\n\t\tmaxHeight: \"100px\",\r\n\t\toverflow: 'hidden'\r\n\t},\r\n\thelper: {\r\n\t\ttextAlign: \"left\",\r\n\t\tdisplay: \"inline-block\",\r\n\t\twhiteSpace: \"pre-wrap\",\r\n\t\twidth: \"100%\",\r\n\t\tmaxHeight: \"250px\",\r\n\t\toverflowY: 'auto',\r\n\t\toverflowX: \"hidden\"\r\n\t},\r\n\tuploader: {\r\n\t\tmargin: \"auto\",\r\n\t\theight: \"100px\",\r\n\t\tborder: \"3px dotted #a3a199\"\r\n\t},\r\n\tmobileTransparent: {\r\n\t\tbackgroundColor: window.LITHO3D.isMobile ? \"rgba(230,230,230,0.1)\" : \"rgba(255,255,255,1)\",\r\n\t},\r\n\ttoolbar: {\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'center',\r\n\t\tjustifyContent: 'flex-end',\r\n\t\tpadding: '5px 8px'\r\n\t}\r\n};\r\n\r\nexport default class OptionMenu extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tmodel_uri: \"\",\r\n\t\t\tmodel_def_uri: \"\",\r\n\t\t\tmodel_type: \"\",\r\n\t\t\tsurfaceList: [],\r\n\t\t\tcolor: '#FCB900',\r\n\t\t\texpandedMenu: null,\r\n\t\t\tviewDisplay: \"color\",\r\n\t\t\tsnackbarOpen: false,\r\n\t\t\tsnackbarDuration: 0,\r\n\t\t\tsnackbarMsg: \"\",\r\n\t\t\tisUpload: true,\r\n\t\t\tisUploadDialogOpen: false,\r\n\t\t\tuploadedModel: null\r\n\t\t};\r\n\r\n\t\tthis.handleMenuChange = this.handleMenuChange.bind(this);\r\n\t\tthis.handleViewCheck = this.handleViewCheck.bind(this);\r\n\t\tthis.handleUploaderClose = this.handleUploaderClose.bind(this);\r\n\t\tthis.handleUploaderOpen = this.handleUploaderOpen.bind(this);\r\n\t\tthis.handleUploaderSave = this.handleUploaderSave.bind(this);\r\n\t\tthis.handleUploaderError = this.handleUploaderError.bind(this);\r\n\t\tthis.handleSnackbarClose = this.handleSnackbarClose.bind(this);\r\n\t\tthis.emitWarningMessage = this.emitWarningMessage.bind(this);\r\n\t\tthis.downloadModelOBJ = this.downloadModelOBJ.bind(this);\r\n\t\tthis.downloadModelSTL = this.downloadModelSTL.bind(this);\r\n\t\tthis.downloadModelGLB = this.downloadModelGLB.bind(this);\r\n\t\tthis.downloadJSON = this.downloadJSON.bind(this);\r\n\t\tthis.downloadZip = this.downloadZip.bind(this);\r\n\t}\r\n\r\n\t/** On mount, load default model */\r\n\tcomponentDidMount() {\r\n\t\tthis.props.loadingToggle(true);\r\n\t\tthis.getConfiguration().then(() => {\r\n\r\n\t\t\t//Load default model, if specified.\r\n\t\t\tif (this.state.model_uri !== \"\") {\r\n\t\t\t\tvar re = /(?:\\.([^.]+))?$/;\r\n\t\t\t\tvar format = re.exec(this.state.model_uri)[1];\r\n\t\t\t\tif (format === undefined) format = \"obj\";\r\n\t\t\t\tvar isUpload = this.state.model_type === window.LITHO3D.MODELTYPES.UPLOAD;\r\n\r\n\t\t\t\twindow.LITHO3D.loadModel(this.state.model_uri, format, this.state.model_type, this.state.color)\r\n\t\t\t\t\t.then(surfaces => {\r\n\t\t\t\t\t\tthis.setState({ isUpload: isUpload, isUploadDialogOpen: false, surfaceList: surfaces },\r\n\t\t\t\t\t\t\tthis.props.loadingToggle(false));\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\tthis.setState({ isUpload: isUpload, isUploadDialogOpen: isUpload });\r\n\t\t\t\t\t\tthis.emitWarningMessage(err.message);\r\n\t\t\t\t\t\tthis.props.loadingToggle(false);\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\tthis.props.loadingToggle(false);\r\n\t\t});\r\n\t}\r\n\r\n\t/** Acquire default configurations from root element */\r\n\tgetConfiguration() {\r\n\t\treturn new Promise((resolve) => {\r\n\t\t\tvar container = document.getElementById(\"root\");\r\n\t\t\tthis.setState({\r\n\t\t\t\tmodel_uri: container.hasAttribute('model_uri') ? container.getAttribute('model_uri') : \"\",\r\n\t\t\t\tmodel_def_uri: container.hasAttribute('model_def_uri') ? container.getAttribute('model_def_uri') : \"\",\r\n\t\t\t\tmodel_type: container.hasAttribute('model_type') ? container.getAttribute('model_type') : \"upload\",\r\n\t\t\t\tcolor: container.hasAttribute('defaultColor') ? container.getAttribute('defaultColor') : \"#FCB900\"\r\n\t\t\t}, resolve(true));\r\n\t\t});\r\n\t}\r\n\r\n\t/** Download the model in STL format */\r\n\tdownloadModelSTL() {\r\n\t\tthis.emitWarningMessage(\"Preparing STL file...\", 60000);\r\n\t\tthis.props.loadingToggle(true);\r\n\t\twindow.LITHO3D.downloadSTL(1, 1, 1, true, false).then(() => {\r\n\t\t\tthis.props.loadingToggle(false);\r\n\t\t\tthis.emitWarningMessage(\"File is ready for download.\", 500);\r\n\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tthis.props.loadingToggle(false);\r\n\t\t\t\tthis.emitWarningMessage(err.message);\r\n\t\t\t});\r\n\t}\r\n\t/** Download the model in OBJ format */\r\n\tdownloadModelOBJ() {\r\n\t\tthis.emitWarningMessage(\"Preparing OBJ file...\", 60000);\r\n\t\tthis.props.loadingToggle(true);\r\n\t\twindow.LITHO3D.downloadOBJ(1, 1, 1, true).then(() => {\r\n\t\t\tthis.props.loadingToggle(false);\r\n\t\t\tthis.emitWarningMessage(\"File is ready for download.\", 500);\r\n\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tthis.props.loadingToggle(false);\r\n\t\t\t\tthis.emitWarningMessage(err.message);\r\n\t\t\t});\r\n\t}\r\n\t/** Download the model in GLB format */\r\n\tdownloadModelGLB() {\r\n\t\tthis.emitWarningMessage(\"Preparing GLTF file...\", 60000);\r\n\t\tthis.props.loadingToggle(true);\r\n\t\twindow.LITHO3D.downloadGLTF(1, 1, 1, false, true).then(() => {\r\n\t\t\tthis.props.loadingToggle(false);\r\n\t\t\tthis.emitWarningMessage(\"File is ready for download.\", 500);\r\n\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tthis.props.loadingToggle(false);\r\n\t\t\t\tthis.emitWarningMessage(err.message);\r\n\t\t\t});\r\n\t}\r\n\t/** Download the model, images and settings in ZIP format */\r\n\tdownloadZip() {\r\n\t\tthis.emitWarningMessage(\"Preparing ZIP file...\", 60000);\r\n\t\tthis.props.loadingToggle(true);\r\n\t\twindow.LITHO3D.downloadZip().then(res => {\r\n\t\t\tthis.props.loadingToggle(false);\r\n\t\t\tthis.emitWarningMessage(\"File is ready for download.\", 500);\r\n\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tthis.props.loadingToggle(false);\r\n\t\t\t\tthis.emitWarningMessage(err.message);\r\n\t\t\t});\r\n\t}\r\n\t/** Download the settings in JSON format */\r\n\tdownloadJSON() {\r\n\t\tthis.emitWarningMessage(\"Downloading JSON file...\", 60000);\r\n\t\tthis.props.loadingToggle(true);\r\n\t\twindow.LITHO3D.downloadJSON().then(res => {\r\n\t\t\tthis.props.loadingToggle(false);\r\n\t\t\tthis.emitWarningMessage(\"File is ready for download.\", 500);\r\n\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tthis.emitWarningMessage(err.message);\r\n\t\t\t\tthis.props.loadingToggle(false);\r\n\t\t\t});\r\n\t}\r\n\r\n\t/** Process the upload of a model file or zip */\r\n\thandleUploaderSave(files) {\r\n\t\tif (files.length > 0) {\r\n\t\t\tif (files[0].extension !== \"zip\") {\r\n\r\n\t\t\t\tvar uploadedModel = URL.createObjectURL(files[0]);\r\n\r\n\t\t\t\tthis.setState({ isUploadDialogOpen: false }, () => {\r\n\t\t\t\t\tthis.props.loadingToggle(true);\r\n\t\t\t\t\twindow.LITHO3D.loadModel(uploadedModel, files[0].extension, this.state.model_type, this.state.color)\r\n\t\t\t\t\t\t.then(surfaces => {\r\n\t\t\t\t\t\t\tthis.setState({ surfaceList: [], model_def_uri: \"\" }, () => {\r\n\t\t\t\t\t\t\t\tif (this.state.uploadedModel) URL.revokeObjectURL(this.state.uploadedModel);\r\n\t\t\t\t\t\t\t\tthis.setState({ surfaceList: surfaces, uploadedModel: uploadedModel },\r\n\t\t\t\t\t\t\t\t\tthis.props.loadingToggle(false));\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\t\tURL.revokeObjectURL(uploadedModel);\r\n\t\t\t\t\t\t\tif (this.refs.upload) this.refs.upload.setState({ files: [] });\r\n\t\t\t\t\t\t\tthis.emitWarningMessage(err.message);\r\n\t\t\t\t\t\t\tthis.props.loadingToggle(false);\r\n\t\t\t\t\t\t\tthis.setState({ isUploadDialogOpen: true });\r\n\t\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\telse if (files[0].extension === \"zip\") {\r\n\t\t\t\tthis.setState({ isUploadDialogOpen: false }, () => {\r\n\t\t\t\t\tthis.props.loadingToggle(true);\r\n\t\t\t\t\tthis.emitWarningMessage(\"Unpacking zip file. Loading...\", 60000);\r\n\t\t\t\t\twindow.LITHO3D.loadZip(files[0])\r\n\t\t\t\t\t\t.then(result => {\r\n\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\tsurfaceList: [],\r\n\t\t\t\t\t\t\t\tmodel_uri: \"\",\r\n\t\t\t\t\t\t\t\tmodel_def_uri: \"\"\r\n\t\t\t\t\t\t\t}, () => {\r\n\t\t\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\t\t\tsurfaceList: result.surfaceList,\r\n\t\t\t\t\t\t\t\t\tcolor: result.color,\r\n\t\t\t\t\t\t\t\t\tviewDisplay: result.viewMode,\r\n\t\t\t\t\t\t\t\t\tuploadedModel: result.model_url,\r\n\t\t\t\t\t\t\t\t\tmodel_type: result.model_type,\r\n\t\t\t\t\t\t\t\t\tmodel_uri: result.model_url,\r\n\t\t\t\t\t\t\t\t\tmodel_def_uri: result.model_def_url\r\n\t\t\t\t\t\t\t\t}, () => {\r\n\t\t\t\t\t\t\t\t\tthis.props.loadingToggle(false);\r\n\t\t\t\t\t\t\t\t\tthis.emitWarningMessage(\"Model loading complete.\", 500);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\t\tif (this.refs.upload) this.refs.upload.setState({ files: [] });\r\n\t\t\t\t\t\t\tthis.emitWarningMessage(err.message);\r\n\t\t\t\t\t\t\tthis.props.loadingToggle(false);\r\n\t\t\t\t\t\t\tthis.setState({ isUploadDialogOpen: true });\r\n\t\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\thandleUploaderError(error, file) {\r\n\t\tthis.emitWarningMessage(error.message);\r\n\t}\r\n\thandleUploaderOpen() {\r\n\t\tthis.setState({ isUploadDialogOpen: true });\r\n\t}\r\n\thandleUploaderClose() {\r\n\t\tthis.setState({ isUploadDialogOpen: false });\r\n\t}\r\n\r\n\temitWarningMessage(message, duration = 5000) {\r\n\t\tthis.setState({ snackbarOpen: false, snackbarMsg: \"\", snackbarDuration: 0 },\r\n\t\t\t() => { this.setState({ snackbarOpen: true, snackbarMsg: message, snackbarDuration: duration }) });\r\n\t}\r\n\thandleSnackbarClose(event, reason) {\r\n\t\tif (reason === 'clickaway') { return; }\r\n\t\tthis.setState({ snackbarOpen: false, snackbarMsg: \"\", snackbarDuration: 0 });\r\n\t}\r\n\r\n\t/** Change currently selected toolbar menu/tab */\r\n\thandleMenuChange = panel => (event, isExpanded) => {\r\n\t\tthis.setState({ expandedMenu: isExpanded ? panel : false });\r\n\t\tthis.props.openFunction();\r\n\t};\r\n\r\n\t/** Process the change of viewer mode */\r\n\thandleViewCheck(event) {\r\n\t\tvar mode = event.target.value;\r\n\t\tif (this.state.viewDisplay !== mode) {\r\n\t\t\tthis.props.loadingToggle(true);\r\n\t\t\tif (window.LITHO3D.changeViewMode(mode)) {\r\n\t\t\t\tthis.setState({ viewDisplay: mode }, this.props.loadingToggle(false));\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.emitWarningMessage(\"No model is available.\");\r\n\t\t\t\tthis.props.loadingToggle(false);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t/** Process the change of model color */\r\n\thandleColorChange = (color, event) => {\r\n\t\tif (this.state.color !== color.hex) {\r\n\t\t\tif(this.props.isMobile)\r\n\t\t\t\tthis.props.warningFunc(\"Changing model color...\", 10000);\r\n\t\t\tthis.props.loadingToggle(true);\r\n\t\t\tif (window.LITHO3D.colorize(color.hex)) {\r\n\t\t\t\tthis.setState({ color: color.hex });\r\n\t\t\t\tthis.props.loadingToggle(false);\r\n\t\t\t\tif(this.props.isMobile)\r\n\t\t\t\t\tthis.props.warningFunc(\"New model color was set.\", 500);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.emitWarningMessage(\"No model is available to color.\");\r\n\t\t\t\tthis.props.loadingToggle(false);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div style={styles.root}>\r\n\t\t\t\t<div style={styles.subroot} className='hide-scrollbar'>\r\n\r\n\t\t\t\t\t{/* MODEL UPLOAD DIALOG */}\r\n\t\t\t\t\t<Dialog open={this.state.isUploadDialogOpen} onClose={this.handleUploaderClose} aria-labelledby=\"form-dialog-title\">\r\n\t\t\t\t\t\t<DialogTitle id=\"form-dialog-title\">Upload a 3D model</DialogTitle>\r\n\t\t\t\t\t\t<DialogContent>\r\n\t\t\t\t\t\t\t<Files\r\n\t\t\t\t\t\t\t\tclassName='files-dropzone'\r\n\t\t\t\t\t\t\t\tonChange={this.handleUploaderSave}\r\n\t\t\t\t\t\t\t\tonError={this.handleUploaderError}\r\n\t\t\t\t\t\t\t\taccepts={['.obj', '.glb', '.zip']}\r\n\t\t\t\t\t\t\t\tmultiple={false}\r\n\t\t\t\t\t\t\t\tmaxFiles={1}\r\n\t\t\t\t\t\t\t\tmaxFileSize={100000000}\r\n\t\t\t\t\t\t\t\tminFileSize={0}\r\n\t\t\t\t\t\t\t\tref='upload'\r\n\t\t\t\t\t\t\t\tclickable\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Box display=\"flex\" px={3} py={5} alignItems=\"center\" justifyContent=\"center\" style={styles.uploader}>\r\n\t\t\t\t\t\t\t\t\t<Typography>Drop files here or click to upload.</Typography>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t</Files>\r\n\t\t\t\t\t\t</DialogContent>\r\n\t\t\t\t\t\t<DialogActions>\r\n\t\t\t\t\t\t\t<Button onClick={this.handleUploaderClose} color=\"primary\">\r\n\t\t\t\t\t\t\t\tClose\r\n          \t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</DialogActions>\r\n\t\t\t\t\t</Dialog>\r\n\r\n\t\t\t\t\t{/* WARNING MESSAGES */}\r\n\t\t\t\t\t<Snackbar\r\n\t\t\t\t\t\tanchorOrigin={{\r\n\t\t\t\t\t\t\tvertical: 'bottom',\r\n\t\t\t\t\t\t\thorizontal: 'left',\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\topen={this.state.snackbarOpen}\r\n\t\t\t\t\t\tautoHideDuration={this.state.snackbarDuration}\r\n\t\t\t\t\t\tonClose={this.handleSnackbarClose}\r\n\t\t\t\t\t\tContentProps={{\r\n\t\t\t\t\t\t\t'aria-describedby': 'message-id',\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tmessage={<span id=\"message-id\">{this.state.snackbarMsg}</span>}\r\n\t\t\t\t\t\taction={[\r\n\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\tkey=\"close\"\r\n\t\t\t\t\t\t\t\taria-label=\"close\"\r\n\t\t\t\t\t\t\t\tcolor=\"inherit\"\r\n\t\t\t\t\t\t\t\tonClick={this.handleSnackbarClose}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<CloseIcon />\r\n\t\t\t\t\t\t\t</IconButton>,\r\n\t\t\t\t\t\t]}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t{/* MENU HEADER */}\r\n\t\t\t\t\t{window.LITHO3D.isMobile ?\r\n\t\t\t\t\t\t<div style={styles.toolbar}>\r\n\t\t\t\t\t\t\t<IconButton onClick={this.props.openToggle}>\r\n\t\t\t\t\t\t\t\t{this.props.open ? <ChevronRightIcon /> : <MenuIcon />}\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t</div> : null}\r\n\r\n\r\n\t\t\t\t\t{/* UPLOAD MENU */}\r\n\t\t\t\t\t{this.state.isUpload ? <React.Fragment>\r\n\t\t\t\t\t\t<ExpansionPanel elevation={window.LITHO3D.isMobile ? 0 : 1} style={styles.mobileTransparent} expanded={this.props.open && (this.state.expandedMenu === 'upload')} onChange={this.handleMenuChange('upload')} TransitionProps={{ unmountOnExit: true }}>\r\n\t\t\t\t\t\t\t<ExpansionPanelSummary\r\n\t\t\t\t\t\t\t\texpandIcon={this.props.open ? <ExpandMoreIcon /> : null}\r\n\t\t\t\t\t\t\t\taria-controls=\"panel1a-content\"\r\n\t\t\t\t\t\t\t\tid=\"panel1a-header\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{this.props.open ? <React.Fragment><ListItemIcon><PublishIcon /></ListItemIcon><Typography>Change Model</Typography></React.Fragment> :\r\n\t\t\t\t\t\t\t\t\t<Box ml={3}><ListItemIcon><PublishIcon /></ListItemIcon></Box>}\r\n\t\t\t\t\t\t\t</ExpansionPanelSummary>\r\n\t\t\t\t\t\t\t<ExpansionPanelDetails>\r\n\t\t\t\t\t\t\t\t<Button onClick={this.handleUploaderOpen} color=\"primary\">Upload a new model</Button>\r\n\t\t\t\t\t\t\t</ExpansionPanelDetails>\r\n\t\t\t\t\t\t</ExpansionPanel></React.Fragment> : null}\r\n\r\n\r\n\t\t\t\t\t{/* COLOR CHANGE MENU */}\r\n\t\t\t\t\t<ExpansionPanel elevation={window.LITHO3D.isMobile ? 0 : 1} style={styles.mobileTransparent} expanded={this.props.open && (this.state.expandedMenu === 'color')} onChange={this.handleMenuChange('color')} TransitionProps={{ unmountOnExit: true }}>\r\n\t\t\t\t\t\t<ExpansionPanelSummary\r\n\t\t\t\t\t\t\texpandIcon={this.props.open ? <ExpandMoreIcon /> : null}\r\n\t\t\t\t\t\t\taria-controls=\"panel1a-content\"\r\n\t\t\t\t\t\t\tid=\"panel1a-header\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{this.props.open ? <React.Fragment><ListItemIcon><ColorLensIcon /></ListItemIcon><Typography>Color</Typography></React.Fragment> :\r\n\t\t\t\t\t\t\t\t<Box ml={3}><ListItemIcon><ColorLensIcon /></ListItemIcon></Box>}\r\n\t\t\t\t\t\t</ExpansionPanelSummary>\r\n\t\t\t\t\t\t<ExpansionPanelDetails>\r\n\t\t\t\t\t\t\t<Box style={styles.colorpicker}>\r\n\t\t\t\t\t\t\t\t<TwitterPicker\r\n\t\t\t\t\t\t\t\t\twidth=\"100%\"\r\n\t\t\t\t\t\t\t\t\tcolor={this.state.color}\r\n\t\t\t\t\t\t\t\t\tonChangeComplete={this.handleColorChange}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t</ExpansionPanelDetails>\r\n\t\t\t\t\t</ExpansionPanel>\r\n\r\n\r\n\t\t\t\t\t{/* SURFACE EDIT MENU */}\r\n\t\t\t\t\t<ExpansionPanel elevation={window.LITHO3D.isMobile ? 0 : 1} style={styles.mobileTransparent} expanded={this.props.open && (this.state.expandedMenu === 'surfaces')} onChange={this.handleMenuChange('surfaces')}>\r\n\t\t\t\t\t\t<ExpansionPanelSummary\r\n\t\t\t\t\t\t\texpandIcon={this.props.open ? <ExpandMoreIcon /> : null}\r\n\t\t\t\t\t\t\taria-controls=\"panel2a-content\"\r\n\t\t\t\t\t\t\tid=\"panel2a-header\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{this.props.open ? <React.Fragment><ListItemIcon><BuildIcon /></ListItemIcon><Typography>Edit Surfaces</Typography></React.Fragment> :\r\n\t\t\t\t\t\t\t\t<Box ml={3}><ListItemIcon><BuildIcon /></ListItemIcon></Box>}\r\n\t\t\t\t\t\t</ExpansionPanelSummary>\r\n\t\t\t\t\t\t<ExpansionPanelDetails>\r\n\t\t\t\t\t\t\t<SurfaceList\r\n\t\t\t\t\t\t\t\tloading={this.props.loadingToggle}\r\n\t\t\t\t\t\t\t\tisUpload={this.state.uploadedModel !== null}\r\n\t\t\t\t\t\t\t\tmodel_def_uri={this.state.model_def_uri}\r\n\t\t\t\t\t\t\t\tsurfaces={this.state.surfaceList}\r\n\t\t\t\t\t\t\t\twarningFunc={this.emitWarningMessage}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</ExpansionPanelDetails>\r\n\t\t\t\t\t</ExpansionPanel>\r\n\r\n\r\n\t\t\t\t\t{/* OPTIONS MENU */}\r\n\t\t\t\t\t<ExpansionPanel elevation={window.LITHO3D.isMobile ? 0 : 1} style={styles.mobileTransparent} expanded={this.props.open && (this.state.expandedMenu === 'options')} onChange={this.handleMenuChange('options')} TransitionProps={{ unmountOnExit: true }}>\r\n\t\t\t\t\t\t<ExpansionPanelSummary\r\n\t\t\t\t\t\t\texpandIcon={this.props.open ? <ExpandMoreIcon /> : null}\r\n\t\t\t\t\t\t\taria-controls=\"panel2a-content\"\r\n\t\t\t\t\t\t\tid=\"panel2a-header\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{this.props.open ? <React.Fragment><ListItemIcon><SettingsIcon /></ListItemIcon><Typography>Settings</Typography></React.Fragment> :\r\n\t\t\t\t\t\t\t\t<Box ml={3}><ListItemIcon><SettingsIcon /></ListItemIcon></Box>}\r\n\t\t\t\t\t\t</ExpansionPanelSummary>\r\n\t\t\t\t\t\t<ExpansionPanelDetails>\r\n\t\t\t\t\t\t\t<FormControl component=\"fieldset\">\r\n\t\t\t\t\t\t\t\t<FormLabel component=\"legend\"><ListItemIcon><ViewIcon /></ListItemIcon><Typography>Viewer Display</Typography></FormLabel>\r\n\t\t\t\t\t\t\t\t<RadioGroup\r\n\t\t\t\t\t\t\t\t\taria-label=\"display\"\r\n\t\t\t\t\t\t\t\t\tname=\"display1\"\r\n\t\t\t\t\t\t\t\t\tvalue={this.state.viewDisplay}\r\n\t\t\t\t\t\t\t\t\tonChange={this.handleViewCheck}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t<FormControlLabel value=\"color\" control={<Radio />} label=\"Color/Material\" />\r\n\t\t\t\t\t\t\t\t\t<FormControlLabel value=\"texture\" control={<Radio />} label=\"Texture Mapping\" />\r\n\t\t\t\t\t\t\t\t\t<FormControlLabel value=\"wireframe\" control={<Radio />} label=\"Wireframe View\" />\r\n\t\t\t\t\t\t\t\t</RadioGroup>\r\n\t\t\t\t\t\t\t</FormControl>\r\n\t\t\t\t\t\t</ExpansionPanelDetails>\r\n\t\t\t\t\t</ExpansionPanel>\r\n\r\n\r\n\t\t\t\t\t{/* HELP MENU */}\r\n\t\t\t\t\t<ExpansionPanel elevation={window.LITHO3D.isMobile ? 0 : 1} style={styles.mobileTransparent} expanded={this.props.open && (this.state.expandedMenu === 'help')} onChange={this.handleMenuChange('help')} TransitionProps={{ unmountOnExit: true }}>\r\n\t\t\t\t\t\t<ExpansionPanelSummary\r\n\t\t\t\t\t\t\texpandIcon={this.props.open ? <ExpandMoreIcon /> : null}\r\n\t\t\t\t\t\t\taria-controls=\"panel2a-content\"\r\n\t\t\t\t\t\t\tid=\"panel2a-header\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{this.props.open ? <React.Fragment><ListItemIcon><HelpIcon /></ListItemIcon><Typography>Help</Typography></React.Fragment> :\r\n\t\t\t\t\t\t\t\t<Box ml={3}><ListItemIcon><HelpIcon /></ListItemIcon></Box>}\r\n\t\t\t\t\t\t</ExpansionPanelSummary>\r\n\t\t\t\t\t\t<ExpansionPanelDetails>\r\n\t\t\t\t\t\t\t<HelpMenu />\r\n\t\t\t\t\t\t</ExpansionPanelDetails>\r\n\t\t\t\t\t</ExpansionPanel>\r\n\r\n\r\n\t\t\t\t\t{/* DOWNLOAD/SERVER MENU */}\r\n\t\t\t\t\t{this.state.isUpload ? <React.Fragment>\r\n\t\t\t\t\t\t<ExpansionPanel elevation={window.LITHO3D.isMobile ? 0 : 1} style={styles.mobileTransparent} expanded={this.props.open && (this.state.expandedMenu === 'download')} onChange={this.handleMenuChange('download')} TransitionProps={{ unmountOnExit: true }}>\r\n\t\t\t\t\t\t\t<ExpansionPanelSummary\r\n\t\t\t\t\t\t\t\texpandIcon={this.props.open ? <ExpandMoreIcon /> : null}\r\n\t\t\t\t\t\t\t\taria-controls=\"panel1a-content\"\r\n\t\t\t\t\t\t\t\tid=\"panel1a-header\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{this.props.open ? <React.Fragment><ListItemIcon><CloudDownloadIcon /></ListItemIcon><Typography>Download Model</Typography></React.Fragment> :\r\n\t\t\t\t\t\t\t\t\t<Box ml={3}><ListItemIcon><CloudDownloadIcon /></ListItemIcon></Box>}\r\n\t\t\t\t\t\t\t</ExpansionPanelSummary>\r\n\t\t\t\t\t\t\t<ExpansionPanelDetails>\r\n\t\t\t\t\t\t\t\t<Box display=\"flex\" flexWrap=\"wrap\">\r\n\t\t\t\t\t\t\t\t\t<Box display=\"flex\" flexWrap=\"wrap\">\r\n\t\t\t\t\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t\t\t\t\t<Button onClick={this.downloadModelOBJ} color=\"primary\">Download OBJ</Button>\r\n\t\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t\t\t\t\t<Button onClick={this.downloadModelGLB} color=\"primary\">Download GLTF</Button>\r\n\t\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t\t\t\t\t<Button onClick={this.downloadModelSTL} color=\"primary\">Download STL</Button>\r\n\t\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t\t\t\t\t<Button onClick={this.downloadJSON} color=\"primary\">Download JSON</Button>\r\n\t\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t\t<Box>\r\n\t\t\t\t\t\t\t\t\t\t<Button onClick={this.downloadZip} color=\"primary\">Download ZIP</Button>\r\n\t\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t\t</Box>\r\n\t\t\t\t\t\t\t</ExpansionPanelDetails>\r\n\t\t\t\t\t\t</ExpansionPanel></React.Fragment> : null}\r\n\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n","import React from 'react';\r\nimport clsx from 'clsx';\r\nimport { makeStyles, useTheme } from '@material-ui/core/styles';\r\n\r\nimport { Swipeable } from 'react-swipeable';\r\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer';\r\n\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\r\n\r\nimport OptionMenu from './OptionMenu';\r\n\r\n\r\n//Width of the drawer/toolbar\r\nconst drawerWidth = 350;\r\n\r\nconst isMobile = window.LITHO3D.isMobile;\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    display: 'flex',\r\n  },\r\n  appBar: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    transition: theme.transitions.create(['width', 'margin'], {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n  },\r\n  appBarShift: {\r\n    marginLeft: drawerWidth,\r\n    width: `calc(100% - ${drawerWidth}px)`,\r\n    transition: theme.transitions.create(['width', 'margin'], {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n  },\r\n  menuButton: {\r\n    marginRight: 36,\r\n  },\r\n  hide: {\r\n    display: 'none',\r\n  },\r\n  drawer: {\r\n    width: drawerWidth,\r\n    flexShrink: 0,\r\n    whiteSpace: 'nowrap',\r\n  },\r\n  drawerOpen: {\r\n    width: drawerWidth,\r\n    backgroundColor: isMobile ? \"rgba(230,230,230,0)\" : \"rgba(255,255,255,1)\",\r\n    backgroundImage: isMobile ? \"linear-gradient(to right, rgba(230,230,230,0.3), rgba(255,255,255,1) 85%)\" : \"linear-gradient(rgba(255,255,255,1), rgba(255,255,255,1))\",\r\n    transition: theme.transitions.create('width', {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n  },\r\n  drawerClose: {\r\n    backgroundColor: isMobile ? \"rgba(230,230,230,0)\" : \"rgba(255,255,255,1)\",\r\n    backgroundImage: isMobile ? \"linear-gradient(to right, rgba(230,230,230,0.3), rgba(255,255,255,1) 85%)\" : \"linear-gradient(rgba(255,255,255,1), rgba(255,255,255,1))\",\r\n    transition: theme.transitions.create('width', {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n    overflowX: 'hidden',\r\n    width: theme.spacing(7) + 1,\r\n    [theme.breakpoints.up('sm')]: {\r\n      width: theme.spacing(7) + 1,\r\n    },\r\n  },\r\n  toolbar: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'flex-end',\r\n    padding: '0 8px',\r\n    ...theme.mixins.toolbar,\r\n  },\r\n  content: {\r\n    flexGrow: 1,\r\n    padding: theme.spacing(3),\r\n  },\r\n}));\r\n\r\nexport default function ToolbarMenu(props) {\r\n  const theme = useTheme();\r\n  const classes = useStyles(theme);\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  function handleDrawerOpen() {\r\n    setOpen(true);\r\n  }\r\n\r\n  function handleDrawerClose() {\r\n    setOpen(false);\r\n  }\r\n\r\n  function handleDrawerToggle() {\r\n    setOpen(!open);\r\n  }\r\n\r\n  function handleSwipe(event){\r\n    if(event.dir === \"Left\" && !open){\r\n      handleDrawerOpen();\r\n    }\r\n    else if(event.dir === \"Right\" && open){\r\n      handleDrawerClose();\r\n    }\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Swipeable \r\n        onSwiping={handleSwipe}\r\n        delta= {20}\r\n      >\r\n        <SwipeableDrawer\r\n          variant=\"permanent\"\r\n          className={clsx(classes.drawer, {\r\n            [classes.drawerOpen]: open,\r\n            [classes.drawerClose]: !open,\r\n          })}\r\n          classes={{\r\n            paper: clsx({\r\n              [classes.drawerOpen]: open,\r\n              [classes.drawerClose]: !open,\r\n            }),\r\n          }}\r\n          onClose={handleDrawerClose}\r\n          onOpen={handleDrawerOpen}\r\n          PaperProps={{ style: { position: 'absolute' } }}\r\n          BackdropProps={{ style: { position: 'absolute' } }}\r\n          ModalProps={{\r\n            container: document.getElementById('drawer-container'),\r\n            style: { position: 'absolute' }\r\n          }}\r\n          open={open}\r\n          anchor=\"right\"\r\n        >\r\n          {!isMobile ? \r\n          <div className={classes.toolbar}>\r\n            <IconButton onClick={handleDrawerToggle}>\r\n              {open ? <ChevronRightIcon /> : <MenuIcon />}\r\n            </IconButton>\r\n          </div> : null}\r\n          <OptionMenu open={open} openToggle={handleDrawerToggle} openFunction={handleDrawerOpen} loadingToggle={props.loadingFunction} />\r\n\r\n        </SwipeableDrawer>\r\n      </Swipeable>\r\n    </React.Fragment>\r\n  );\r\n}","import React, { Component } from 'react';\nimport '../css/App.css';\n\nimport Box from '@material-ui/core/Box';\n\nimport Viewer3D from './Viewer3D';\nimport ToolbarMenu from './ToolbarMenu';\n\n\nexport default class App extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tloading: false\n\t\t};\n\t\tthis.toggleLoading = this.toggleLoading.bind(this);\n\t}\n\n\ttoggleLoading(state) {\n\t\tthis.setState({ loading: state });\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div style={{ position: \"relative\", height: \"100%\", width: \"100%\", overflow: \"hidden\" }}>\n\t\t\t\t<Box display=\"flex\" height=\"100%\" width=\"100%\">\n\t\t\t\t\t<Box id=\"viewer-container\" height=\"100%\">\n\t\t\t\t\t\t<Viewer3D loading={this.state.loading} />\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box height=\"100%\" width=\"60px\" id=\"drawer-container\" position=\"relative\">\n\t\t\t\t\t\t<ToolbarMenu loadingFunction={this.toggleLoading}>\n\t\t\t\t\t\t</ToolbarMenu>\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\t\t\t</div>\n\t\t);\n\t}\n\n}","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './css/index.css';\nimport App from './components/App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}