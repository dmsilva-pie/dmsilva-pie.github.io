(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{168:function(e,t,a){e.exports=a(342)},173:function(e,t,a){},174:function(e,t,a){},342:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),i=a(11),o=a.n(i),r=(a(173),a(35)),s=a(23),c=a(39),d=a(36),u=a(14),h=a(38),m=(a(174),a(403)),p=a(402),g=a(383),f=a(384),E=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={loading:!1},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){window.createScene()}},{key:"render",value:function(){return l.a.createElement("div",{id:"viewer"},l.a.createElement("div",{id:"loadingScreen"},l.a.createElement(g.a,{in:this.props.loading,style:{transitionDelay:this.state.loading?"800ms":"0ms"},unmountOnExit:!0},l.a.createElement(f.a,{disableShrink:!0,size:100}))))}}]),t}(n.Component),b=a(408),w=a(398),v=a(400),C=a(105),y=a(399),x=a(407),k=a(412),S=a(401),_=a(413),O=a(411),j=a(49),M=a.n(j),D=a(150),V=a.n(D),F=a(152),I=a.n(F),A=a(151),L=a.n(A),R=a(149),U=a.n(R),T=a(153),z=a.n(T),G=a(145),B=a(82),N=a(396),W=a(390),J=a(388),H=a(146),P=a.n(H),$=a(385),q=a(409),K=a(395),Q=a(83),X=a(406),Y=a(154),Z=a(405),ee=a(410),te=a(414),ae=a(394),ne=a(392),le=a(393),ie=a(391),oe=a(104),re=a.n(oe),se=a(148),ce=a.n(se),de=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).DEFAULT_RES=a.props.isMobile?5:7,a.DEFAULT_SCALE=200,a.state={anchorEl:void 0,dialogOpen:!1,loading:!1,img_url:"./img/".concat(a.props.item+1,".png"),img_file:null,enabled:!1,usable:!1,scale:a.DEFAULT_SCALE,resolution:a.DEFAULT_RES},a.handleOpenMenu=a.handleOpenMenu.bind(Object(u.a)(a)),a.handleCloseMenu=a.handleCloseMenu.bind(Object(u.a)(a)),a.handleOpenDialog=a.handleOpenDialog.bind(Object(u.a)(a)),a.handleCloseDialog=a.handleCloseDialog.bind(Object(u.a)(a)),a.handleCheck=a.handleCheck.bind(Object(u.a)(a)),a.onImageAdd=a.onImageAdd.bind(Object(u.a)(a)),a.onImageAddError=a.onImageAddError.bind(Object(u.a)(a)),a.onImageRemove=a.onImageRemove.bind(Object(u.a)(a)),a.handleScaleSliderChange=a.handleScaleSliderChange.bind(Object(u.a)(a)),a.handleResSliderChange=a.handleResSliderChange.bind(Object(u.a)(a)),a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"handleOpenMenu",value:function(e){this.setState({anchorEl:e.currentTarget})}},{key:"handleCloseMenu",value:function(){this.setState({anchorEl:null})}},{key:"handleOpenDialog",value:function(){this.setState({dialogOpen:!0})}},{key:"handleCloseDialog",value:function(){this.setState({dialogOpen:!1})}},{key:"handleCheck",value:function(e){var t=this,a=this.state.usable;this.setState({usable:!a},function(){console.log("check!"),t.props.updateFunction(t.props.item,t.state.img_url,t.state.img_file,t.state.scale,t.state.resolution,t.state.usable)})}},{key:"onImageAdd",value:function(e){var t=this;0!==e.length&&this.setState({img_url:e[0].preview.url,img_file:e[0],enabled:!0,usable:!0},function(){t.refs.files.setState({files:[]}),t.props.updateFunction(t.props.item,t.state.img_url,t.state.img_file,t.state.scale,t.state.resolution,t.state.usable)})}},{key:"onImageAddError",value:function(e){console.log(e)}},{key:"onImageRemove",value:function(){var e=this;this.setState({img_url:"./img/".concat(this.props.item+1,".png"),img_file:null,enabled:!1,usable:!1,scale:this.DEFAULT_SCALE,resolution:this.DEFAULT_RES},function(){e.refs.files.setState({files:[]}),e.props.updateFunction(e.props.item,e.state.img_url,e.state.img_file,e.state.scale,e.state.resolution,e.state.usable)})}},{key:"handleScaleSliderChange",value:function(e,t){var a=this;this.setState({scale:t},function(){a.props.updateFunction(a.props.item,a.state.img_url,a.state.img_file,a.state.scale,a.state.resolution,a.state.usable)})}},{key:"handleResSliderChange",value:function(e,t){var a=this;this.setState({resolution:t},function(){a.props.updateFunction(a.props.item,a.state.img_url,a.state.img_file,a.state.scale,a.state.resolution,a.state.usable)})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement($.a,{key:"item-".concat(this.props.item)},l.a.createElement(m.a,{width:"100%",height:80,display:"flex"},l.a.createElement(P.a,{className:"files-dropzone",ref:"files",onChange:this.onImageAdd,onError:this.onImageAddError,accepts:["image/*"],maxFiles:1,maxFileSize:1e7,minFileSize:0,clickable:!0},l.a.createElement(m.a,{width:80,height:80,alignSelf:"flex-start"},l.a.createElement(Q.a,{focusRipple:!0,key:this.props.item+1,style:{width:"100%",height:"100%",backgroundImage:"url(".concat(this.state.img_url,")"),backgroundSize:"cover"}},l.a.createElement("span",{className:"showonfocus"},l.a.createElement(q.a,{title:this.state.enabled?"Change Image":"Add Image",enterDelay:100},l.a.createElement(ce.a,{style:{color:"white",opacity:.6,width:"50%",height:"50%"}})))))),l.a.createElement(m.a,{height:80,flexDirection:"column",flexGrow:1,alignSelf:"center"},l.a.createElement(m.a,{height:40,pl:3,display:"flex",flexGrow:1,alignItems:"center"},l.a.createElement(C.a,null,this.props.title)),l.a.createElement(J.a,null),l.a.createElement(m.a,{height:40,pl:1,display:"flex",flexGrow:1,alignItems:"center"},this.state.enabled?l.a.createElement(q.a,{title:"Clear",enterDelay:100},l.a.createElement(Y.a,{"aria-label":"delete",onClick:this.handleOpenDialog},l.a.createElement(re.a,null))):l.a.createElement(Y.a,{disabled:!this.state.enabled,"aria-label":"delete",onClick:this.handleOpenDialog},l.a.createElement(re.a,null)),l.a.createElement(Y.a,{disabled:!this.state.enabled,"aria-controls":"simple-menu"+this.props.item,"aria-haspopup":"true",onClick:this.handleOpenMenu},l.a.createElement(M.a,null)),l.a.createElement(X.a,{id:"simple-menu"+this.props.item,anchorEl:this.state.anchorEl,keepMounted:!0,open:Boolean(this.state.anchorEl),onClose:this.handleCloseMenu},l.a.createElement(m.a,{px:2,py:1,display:"flex",flexDirection:"column",flexGrow:1,alignItems:"center"},l.a.createElement(C.a,null,"Extrude Scale"),l.a.createElement(ee.a,{onChangeCommitted:this.handleScaleSliderChange,defaultValue:this.state.scale,"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",step:1,marks:!0,min:this.props.model_props.faces[this.props.item].min_extrude,max:this.props.model_props.faces[this.props.item].max_extrude}),l.a.createElement(C.a,null,"Resolution"),l.a.createElement(ee.a,{onChangeCommitted:this.handleResSliderChange,defaultValue:this.state.resolution,"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",step:1,marks:!0,min:this.props.model_props.faces[this.props.item].min_res,max:this.props.model_props.faces[this.props.item].max_res}))))),l.a.createElement(m.a,{width:40,height:80,display:"flex",alignItems:"center",alignSelf:"flex-end"},l.a.createElement(Z.a,{disabled:!this.state.enabled,checked:this.state.usable,onChange:this.handleCheck})))),l.a.createElement(te.a,{open:this.state.dialogOpen,onClose:this.handleCloseDialog,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(ie.a,{id:"alert-dialog-title"},"Clear surface?"),l.a.createElement(ne.a,null,l.a.createElement(le.a,{id:"alert-dialog-description"},"Do you wish to clear the data on the selected surface?")),l.a.createElement(ae.a,null,l.a.createElement(K.a,{onClick:function(){e.handleCloseDialog(),e.onImageRemove()},color:"primary"},"Confirm"),l.a.createElement(K.a,{onClick:this.handleCloseDialog,color:"primary",autoFocus:!0},"Cancel"))))}}]),t}(n.Component),ue=a(397),he=Object(N.a)(function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper,position:"relative",maxHeight:300},listSection:{backgroundColor:"inherit"},ul:{backgroundColor:"inherit",padding:0}}}),me={root:{width:"100%",height:"100%",overflow:"hidden"},subroot:{width:"100%",height:"100%",overflow:"auto",paddingright:"20px"},heading:{fontSize:15,fontWeight:300}};function pe(e){var t=he(),a=Object(ue.a)("(min-width:600px)");return l.a.createElement("div",{style:me.root},l.a.createElement("div",{style:me.subroot,className:"hide-scrollbar"},l.a.createElement(W.a,{className:t.root},l.a.createElement(J.a,null),Object(B.a)(Array(e.model_props.face_number).keys()).map(function(t){return l.a.createElement("div",{key:t},l.a.createElement(de,{item:t,isMobile:!a,title:e.model_props.faces[t].title,model_props:e.model_props,updateFunction:e.updateFunction}),l.a.createElement(J.a,null))}))))}var ge={root:{width:"100%",height:"100%",overflow:"hidden"},subroot:{width:"100%",height:"100%",overflow:"auto",paddingright:"20px"},heading:{fontSize:15,fontWeight:300}},fe=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).handleMenuChange=function(e){return function(t,n){a.setState({expandedMenu:!!n&&e})}},a.handleColorChange=function(e,t){a.props.loadingFunction(),a.setState({color:e.hex},function(){window.updateModel(a.state.model_settings,a.state.color,a.state.wireframeView,a.state.textureView).then(function(e){a.props.loadingFunction()})})},a.state={model_props:{model_id:void 0,face_number:0,faces:[]},model_settings:{imageMappings:[],scaleValues:[],resolutionValues:[]},color:"#FCB900",wireframeView:!1,textureView:!1,expandedMenu:null,viewDisplay:"color"},a.handleMenuChange=a.handleMenuChange.bind(Object(u.a)(a)),a.handleViewCheck=a.handleViewCheck.bind(Object(u.a)(a)),a.handleUpdatedSurface=a.handleUpdatedSurface.bind(Object(u.a)(a)),a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.loadingFunction(),window.loadModel().then(function(t){e.setState({model_props:t.info,model_settings:t.settings}),e.props.loadingFunction()})}},{key:"handleViewCheck",value:function(e){var t=this;this.props.loadingFunction(),this.setState({viewDisplay:e.target.value,wireframeView:"wireframe"===e.target.value,textureView:"texture"===e.target.value},function(){window.updateModel(t.state.model_settings,t.state.color,t.state.wireframeView,t.state.textureView).then(function(e){t.props.loadingFunction()})})}},{key:"handleUpdatedSurface",value:function(e,t,a,n,l,i){var o=this;this.props.loadingFunction();var r={modelSelected:this.state.model_props.model_id,numberFaces:this.state.model_props.face_number,imageMappings:this.state.model_settings.imageMappings.map(function(a){return a.index===e?{index:a.index,img:t,enabled:i}:a}),scaleValues:this.state.model_settings.scaleValues,resolutionValues:this.state.model_settings.resolutionValues,textureBounds:[1,0,1,0],isUpdate:!1,wireframeView:this.state.wireframeView,textureView:this.state.textureView,color:this.state.color};r.resolutionValues[e]=l,r.scaleValues[e]=n,this.setState({model_settings:r},function(){window.updateModel(o.state.model_settings,o.state.color,o.state.wireframeView,o.state.textureView).then(function(e){o.props.loadingFunction()})})}},{key:"render",value:function(){return l.a.createElement("div",{style:ge.root},l.a.createElement("div",{style:ge.subroot,className:"hide-scrollbar"},l.a.createElement(b.a,{disabled:!0,color:"LightGrey"},l.a.createElement(w.a,{expandIcon:l.a.createElement(U.a,null),"aria-controls":"panel3a-content",id:"panel3a-header"},l.a.createElement(C.a,null,"Customize your model"))),l.a.createElement(b.a,{expanded:"color"===this.state.expandedMenu,onChange:this.handleMenuChange("color")},l.a.createElement(w.a,{expandIcon:l.a.createElement(M.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},l.a.createElement(y.a,null,l.a.createElement(V.a,null)),l.a.createElement(C.a,null,"Color")),l.a.createElement(v.a,null,l.a.createElement(G.TwitterPicker,{width:"100%",color:this.state.color,onChangeComplete:this.handleColorChange}))),l.a.createElement(b.a,{expanded:"surfaces"===this.state.expandedMenu,onChange:this.handleMenuChange("surfaces")},l.a.createElement(w.a,{expandIcon:l.a.createElement(M.a,null),"aria-controls":"panel2a-content",id:"panel2a-header"},l.a.createElement(y.a,null,l.a.createElement(L.a,null)),l.a.createElement(C.a,null,"Edit Surfaces")),l.a.createElement(v.a,null,l.a.createElement(pe,{updateFunction:this.handleUpdatedSurface,model_props:this.state.model_props}))),l.a.createElement(b.a,{expanded:"options"===this.state.expandedMenu,onChange:this.handleMenuChange("options")},l.a.createElement(w.a,{expandIcon:l.a.createElement(M.a,null),"aria-controls":"panel2a-content",id:"panel2a-header"},l.a.createElement(y.a,null,l.a.createElement(I.a,null)),l.a.createElement(C.a,null,"Settings")),l.a.createElement(v.a,null,l.a.createElement(_.a,{component:"fieldset"},l.a.createElement(O.a,{component:"legend"},l.a.createElement(y.a,null,l.a.createElement(z.a,null)),l.a.createElement(C.a,null,"Viewer Display")),l.a.createElement(k.a,{"aria-label":"display",name:"display1",value:this.state.viewDisplay,onChange:this.handleViewCheck},l.a.createElement(S.a,{value:"color",control:l.a.createElement(x.a,null),label:"Color/Material"}),l.a.createElement(S.a,{value:"texture",control:l.a.createElement(x.a,null),label:"Texture Mapping"}),l.a.createElement(S.a,{value:"wireframe",control:l.a.createElement(x.a,null),label:"Wireframe View"}))))),l.a.createElement(b.a,{disabled:!0,color:"LightGrey"},l.a.createElement(w.a,{"aria-controls":"panel3a-content",id:"panel3a-header"},l.a.createElement(C.a,null," ")))))}}]),t}(n.Component),Ee=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this,e))).state={loading:!1},a.toggleLoading=a.toggleLoading.bind(Object(u.a)(a)),a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"toggleLoading",value:function(){var e=this.state.loading;this.setState({loading:!e})}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(p.a,{container:!0},l.a.createElement(p.a,{item:!0,sm:12,md:8},l.a.createElement(m.a,{height:600,width:"100%"},l.a.createElement(E,{loading:this.state.loading}))),l.a.createElement(p.a,{item:!0,sm:12,md:4},l.a.createElement(m.a,{height:600,width:"100%"},l.a.createElement(fe,{loadingFunction:this.toggleLoading})))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(Ee,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[168,1,2]]]);
//# sourceMappingURL=main.479bcb40.chunk.js.map